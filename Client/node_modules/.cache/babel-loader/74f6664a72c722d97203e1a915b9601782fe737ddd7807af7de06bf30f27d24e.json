{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Musha\\\\Desktop\\\\DAAR\\\\projet\\\\Projet 1\\\\Automaton-\\\\src\\\\app\\\\egrep.js\",\n  _s = $RefreshSig$();\n// src/components/BookList.js\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport booksData from \"../database.json\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BookList = () => {\n  _s();\n  const [books, setBooks] = useState([]);\n  useEffect(() => {\n    // Charger les livres depuis le fichier JSON\n    const englishBooks = booksData.English;\n    setBooks(englishBooks);\n  }, []);\n  const getDownloadLink = link => {\n    const proxyUrl = \"https://thingproxy.freeboard.io/fetch/\";\n    const gutenbergUrl = `https://www.gutenberg.org/cache/epub/${link}/pg${link}.txt`;\n    return proxyUrl + gutenbergUrl;\n  };\n  const downloadBook = async book => {\n    const downloadLink = getDownloadLink(book.link);\n    try {\n      // Faire une requête HTTP pour obtenir le fichier texte\n      const response = await axios.get(downloadLink, {\n        responseType: \"blob\"\n      });\n\n      // Créer une URL pour le fichier téléchargé\n      const fileURL = window.URL.createObjectURL(new Blob([response.data]));\n      const fileLink = document.createElement(\"a\");\n      fileLink.href = fileURL;\n      fileLink.setAttribute(\"download\", `${book.Title}.txt`);\n\n      // Déclencher le téléchargement\n      document.body.appendChild(fileLink);\n      fileLink.click();\n      document.body.removeChild(fileLink);\n    } catch (error) {\n      console.error(\"Erreur lors du téléchargement du livre:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Books in English\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container-fluid pt-4 px-4 \",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex align-items-center justify-content-between gap-4\",\n              children: books.map((book, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                  children: book.Title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 55,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"https://www.gutenberg.org/cache/epub/{book.link}/pg{book.link}.cover.medium.jpg\",\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 56,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Author: \", book.Author]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    console.log(book);\n                    downloadBook(book);\n                  },\n                  children: \"Download TXT\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 62,\n                  columnNumber: 21\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 54,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(BookList, \"ww1JAI05mMsgubm5EIyBKqdj5S0=\");\n_c = BookList;\nexport default BookList;\nvar _c;\n$RefreshReg$(_c, \"BookList\");","map":{"version":3,"names":["React","useEffect","useState","axios","booksData","jsxDEV","_jsxDEV","Fragment","_Fragment","BookList","_s","books","setBooks","englishBooks","English","getDownloadLink","link","proxyUrl","gutenbergUrl","downloadBook","book","downloadLink","response","get","responseType","fileURL","window","URL","createObjectURL","Blob","data","fileLink","document","createElement","href","setAttribute","Title","body","appendChild","click","removeChild","error","console","children","className","fileName","_jsxFileName","lineNumber","columnNumber","map","index","src","alt","Author","onClick","log","_c","$RefreshReg$"],"sources":["C:/Users/Musha/Desktop/DAAR/projet/Projet 1/Automaton-/src/app/egrep.js"],"sourcesContent":["// src/components/BookList.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport booksData from \"../database.json\";\r\n\r\nconst BookList = () => {\r\n  const [books, setBooks] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // Charger les livres depuis le fichier JSON\r\n    const englishBooks = booksData.English;\r\n    setBooks(englishBooks);\r\n  }, []);\r\n\r\n  const getDownloadLink = (link) => {\r\n    const proxyUrl = \"https://thingproxy.freeboard.io/fetch/\";\r\n    const gutenbergUrl = `https://www.gutenberg.org/cache/epub/${link}/pg${link}.txt`;\r\n    return proxyUrl + gutenbergUrl;\r\n  };\r\n\r\n  const downloadBook = async (book) => {\r\n    const downloadLink = getDownloadLink(book.link);\r\n\r\n    try {\r\n      // Faire une requête HTTP pour obtenir le fichier texte\r\n      const response = await axios.get(downloadLink, {\r\n        responseType: \"blob\",\r\n      });\r\n\r\n      // Créer une URL pour le fichier téléchargé\r\n      const fileURL = window.URL.createObjectURL(new Blob([response.data]));\r\n      const fileLink = document.createElement(\"a\");\r\n      fileLink.href = fileURL;\r\n      fileLink.setAttribute(\"download\", `${book.Title}.txt`);\r\n\r\n      // Déclencher le téléchargement\r\n      document.body.appendChild(fileLink);\r\n      fileLink.click();\r\n      document.body.removeChild(fileLink);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors du téléchargement du livre:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"\">\r\n        <div className=\"\">\r\n          <div>\r\n            <h1>Books in English</h1>\r\n            <div className=\"container-fluid pt-4 px-4 \">\r\n              <div className=\"d-flex align-items-center justify-content-between gap-4\">\r\n                {books.map((book, index) => (\r\n                  <div key={index}>\r\n                    <h6>{book.Title}</h6>\r\n                    <img\r\n                      src=\"https://www.gutenberg.org/cache/epub/{book.link}/pg{book.link}.cover.medium.jpg\"\r\n                      alt=\"\"\r\n                    />\r\n                    <p>Author: {book.Author}</p>\r\n                    {/* Au lieu d'un simple lien, on appelle la fonction downloadBook */}\r\n                    <button\r\n                      onClick={() => {\r\n                        console.log(book);\r\n                        downloadBook(book);\r\n                      }}\r\n                    >\r\n                      Download TXT\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BookList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}